# =====================================================
# VNF Framework Configuration Constants
# =====================================================
# This file defines all configuration constants, timeouts, and defaults
# for the VNF framework implementation

# =====================================================
# General Settings
# =====================================================
VNF_FRAMEWORK_ENABLED=true
VNF_FRAMEWORK_VERSION=1.0.0

# =====================================================
# Broker Configuration
# =====================================================
# Virtual Router broker settings
VNF_BROKER_TYPE=VIRTUAL_ROUTER
VNF_BROKER_PORT=8443
VNF_BROKER_PROTOCOL=https
VNF_BROKER_MTLS_ENABLED=true

# Alternative broker types (for future use)
# VNF_BROKER_TYPE=DIRECT
# VNF_BROKER_TYPE=EXTERNAL_CONTROLLER

# =====================================================
# Security Settings
# =====================================================
# JWT token configuration
VNF_JWT_ALGORITHM=HS256
VNF_JWT_EXPIRY_SECONDS=300
VNF_JWT_ISSUER=cloudstack-mgmt

# mTLS certificate paths (on VR)
VNF_BROKER_CERT_PATH=/etc/vnf-broker/server.crt
VNF_BROKER_KEY_PATH=/etc/vnf-broker/server.key
VNF_BROKER_CA_CERT_PATH=/etc/vnf-broker/ca.crt

# SSH key for CLI-based VNFs (on VR)
VNF_BROKER_SSH_KEY_PATH=/etc/vnf-broker/ssh_key

# Secret storage encryption
VNF_SECRET_ENCRYPTION_ALGORITHM=AES256

# =====================================================
# Request/Response Timeouts
# =====================================================
# General VNF API request timeout
VNF_REQUEST_TIMEOUT_SECONDS=30

# SSH command timeout
VNF_SSH_TIMEOUT_SECONDS=60

# Broker connection timeout
VNF_BROKER_CONNECT_TIMEOUT_SECONDS=10

# HTTP read timeout
VNF_HTTP_READ_TIMEOUT_SECONDS=25

# =====================================================
# Retry Configuration
# =====================================================
# Maximum retry attempts for failed operations
VNF_MAX_RETRY_ATTEMPTS=3

# Base delay for exponential backoff (milliseconds)
VNF_RETRY_BASE_DELAY_MS=1000

# Backoff multiplier
VNF_RETRY_BACKOFF_MULTIPLIER=2.0

# Maximum retry delay (milliseconds)
VNF_RETRY_MAX_DELAY_MS=30000

# Retry on these HTTP status codes
VNF_RETRY_STATUS_CODES=408,429,500,502,503,504

# =====================================================
# Reconciliation Settings
# =====================================================
# Enable automatic reconciliation
VNF_RECONCILIATION_ENABLED=true

# Reconciliation interval (minutes)
VNF_RECONCILIATION_INTERVAL_MINUTES=15

# Maximum rules to reconcile per batch
VNF_RECONCILIATION_BATCH_SIZE=100

# Auto-fix missing rules
VNF_RECONCILIATION_AUTO_FIX_MISSING=true

# Auto-remove unknown rules
VNF_RECONCILIATION_AUTO_REMOVE_UNKNOWN=false

# Reconciliation timeout (minutes)
VNF_RECONCILIATION_TIMEOUT_MINUTES=10

# =====================================================
# Health Check Settings
# =====================================================
# Enable periodic health checks
VNF_HEALTH_CHECK_ENABLED=true

# Health check interval (minutes)
VNF_HEALTH_CHECK_INTERVAL_MINUTES=5

# Mark unhealthy after N consecutive failures
VNF_HEALTH_CHECK_FAILURE_THRESHOLD=3

# Health check timeout (seconds)
VNF_HEALTH_CHECK_TIMEOUT_SECONDS=10

# Health check method (ping, http, or api_call)
VNF_HEALTH_CHECK_METHOD=api_call

# =====================================================
# Dictionary Configuration
# =====================================================
# Maximum dictionary size (bytes)
VNF_DICTIONARY_MAX_SIZE_BYTES=1048576

# Supported schema versions
VNF_DICTIONARY_SUPPORTED_VERSIONS=1.0

# Validate placeholders against known fields
VNF_DICTIONARY_VALIDATE_PLACEHOLDERS=true

# Require services section
VNF_DICTIONARY_REQUIRE_SERVICES=true

# Require create/delete pairs for services
VNF_DICTIONARY_REQUIRE_DELETE_FOR_CREATE=false

# =====================================================
# Network Configuration
# =====================================================
# Gateway IP assignment for VNF
VNF_GATEWAY_IP_POSITION=1

# VR DHCP configuration
VNF_VR_DHCP_ENABLED=true
VNF_VR_DNS_ENABLED=true
VNF_VR_METADATA_ENABLED=true

# VR IP offset (if VNF takes .1, VR uses .2)
VNF_VR_IP_OFFSET=1

# =====================================================
# Logging and Audit
# =====================================================
# Enable broker audit logging
VNF_BROKER_AUDIT_ENABLED=true

# Audit log retention (days)
VNF_BROKER_AUDIT_RETENTION_DAYS=90

# Log request/response bodies (security risk if enabled)
VNF_LOG_REQUEST_BODIES=false
VNF_LOG_RESPONSE_BODIES=false

# Log level for VNF operations
VNF_LOG_LEVEL=INFO

# Mask secrets in logs
VNF_LOG_MASK_SECRETS=true

# =====================================================
# Performance Tuning
# =====================================================
# Thread pool size for VNF operations
VNF_EXECUTOR_THREAD_POOL_SIZE=10

# Queue size for pending operations
VNF_EXECUTOR_QUEUE_SIZE=100

# Connection pool size per VNF
VNF_HTTP_CONNECTION_POOL_SIZE=5

# Keep-alive timeout for connections
VNF_HTTP_KEEP_ALIVE_SECONDS=60

# =====================================================
# Rate Limiting
# =====================================================
# Enable rate limiting for VNF API calls
VNF_RATE_LIMIT_ENABLED=false

# Maximum requests per minute per VNF
VNF_RATE_LIMIT_PER_MINUTE=60

# Burst allowance
VNF_RATE_LIMIT_BURST=10

# =====================================================
# Error Handling
# =====================================================
# Mark VNF as ERROR state after N consecutive failures
VNF_ERROR_THRESHOLD=5

# Auto-recovery attempt interval (minutes)
VNF_AUTO_RECOVERY_INTERVAL_MINUTES=30

# Circuit breaker settings
VNF_CIRCUIT_BREAKER_ENABLED=false
VNF_CIRCUIT_BREAKER_FAILURE_THRESHOLD=10
VNF_CIRCUIT_BREAKER_TIMEOUT_SECONDS=60

# =====================================================
# Template Details Keys
# =====================================================
# Standard template detail keys for credentials
VNF_TEMPLATE_DETAIL_API_KEY=API_KEY
VNF_TEMPLATE_DETAIL_API_TOKEN=API_TOKEN
VNF_TEMPLATE_DETAIL_SSH_USER=SSH_USER
VNF_TEMPLATE_DETAIL_SSH_PASSWORD=SSH_PASSWORD
VNF_TEMPLATE_DETAIL_SSH_KEY=SSH_KEY
VNF_TEMPLATE_DETAIL_WEB_USER=WEB_USER
VNF_TEMPLATE_DETAIL_WEB_PASSWORD=WEB_PASSWORD
VNF_TEMPLATE_DETAIL_SSH_PORT=SSH_PORT
VNF_TEMPLATE_DETAIL_HTTPS_PORT=HTTPS_PORT

# NIC role mappings
VNF_TEMPLATE_DETAIL_NIC0_ROLE=NIC0_ROLE
VNF_TEMPLATE_DETAIL_NIC1_ROLE=NIC1_ROLE
VNF_TEMPLATE_DETAIL_NIC2_ROLE=NIC2_ROLE

# =====================================================
# Placeholder Names
# =====================================================
# Standard placeholders available in dictionaries

# Common
PLACEHOLDER_RULE_ID=ruleId
PLACEHOLDER_EXTERNAL_ID=externalId
PLACEHOLDER_NETWORK_ID=networkId

# Firewall
PLACEHOLDER_SOURCE_CIDR=sourceCidr
PLACEHOLDER_DEST_CIDR=destCidr
PLACEHOLDER_PROTOCOL=protocol
PLACEHOLDER_START_PORT=startPort
PLACEHOLDER_END_PORT=endPort
PLACEHOLDER_PUBLIC_PORT=publicPort
PLACEHOLDER_ICMP_TYPE=icmpType
PLACEHOLDER_ICMP_CODE=icmpCode
PLACEHOLDER_ACTION=action

# NAT
PLACEHOLDER_SOURCE_IP=sourceIp
PLACEHOLDER_PUBLIC_IP=publicIp
PLACEHOLDER_DEST_IP=destIp
PLACEHOLDER_PRIVATE_IP=privateIp
PLACEHOLDER_PRIVATE_PORT=privatePort

# Load Balancer
PLACEHOLDER_LB_NAME=lbName
PLACEHOLDER_ALGORITHM=algorithm
PLACEHOLDER_VIP_ID=vipId
PLACEHOLDER_MEMBER_IP=memberIp
PLACEHOLDER_MEMBER_PORT=memberPort

# VPN
PLACEHOLDER_REMOTE_SUBNET=remoteSubnet
PLACEHOLDER_LOCAL_SUBNET=localSubnet
PLACEHOLDER_SHARED_SECRET=sharedSecret
PLACEHOLDER_IKE_POLICY=ikePolicy
PLACEHOLDER_IPSEC_POLICY=ipsecPolicy

# =====================================================
# Default Values
# =====================================================
# Default HTTP method if not specified
VNF_DEFAULT_HTTP_METHOD=GET

# Default success code if not specified
VNF_DEFAULT_SUCCESS_CODE=200

# Default authentication type
VNF_DEFAULT_AUTH_TYPE=NONE

# Default protocol
VNF_DEFAULT_PROTOCOL=HTTPS

# Default port
VNF_DEFAULT_PORT=443

# =====================================================
# Feature Flags
# =====================================================
# Enable experimental features
VNF_EXPERIMENTAL_FEATURES_ENABLED=false

# Enable service chaining
VNF_SERVICE_CHAINING_ENABLED=false

# Enable multiple VNFs per network
VNF_MULTIPLE_PER_NETWORK_ENABLED=false

# Enable VNF HA
VNF_HIGH_AVAILABILITY_ENABLED=false

# =====================================================
# Vendor-Specific Overrides
# =====================================================
# These can be set per vendor if needed

# pfSense specific
VNF_PFSENSE_API_VERSION=v1
VNF_PFSENSE_REQUIRE_COMMIT=false

# FortiGate specific
VNF_FORTIGATE_API_VERSION=v2
VNF_FORTIGATE_VDOM=root

# Palo Alto specific
VNF_PALOALTO_REQUIRE_COMMIT=true
VNF_PALOALTO_COMMIT_TIMEOUT_SECONDS=120

# VyOS specific
VNF_VYOS_COMMIT_TIMEOUT_SECONDS=30
VNF_VYOS_CONFIG_MODE_PROMPT=# 

# =====================================================
# Database Settings
# =====================================================
# Audit log cleanup job interval (hours)
VNF_AUDIT_CLEANUP_INTERVAL_HOURS=24

# Reconciliation log retention (days)
VNF_RECONCILIATION_LOG_RETENTION_DAYS=30

# =====================================================
# Monitoring & Metrics
# =====================================================
# Enable Prometheus metrics
VNF_METRICS_ENABLED=false

# Metrics port
VNF_METRICS_PORT=9090

# Track operation latency
VNF_METRICS_TRACK_LATENCY=true

# Track success/failure rates
VNF_METRICS_TRACK_RATES=true
